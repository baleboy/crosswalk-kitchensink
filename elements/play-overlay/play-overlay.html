<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="play-overlay" attributes="paused disabled">
  <template>
    <style>
      :host {
        width: auto;
        height: auto;
        display: block;
        overflow: hidden;
      }
      #player::before {
        background: #000 url("play-overlay-button.svg") no-repeat center center;
        background-size: 72px 72px;
        content: '';
        bottom: 0;
        top: 0;
        left: 0;
        right: 0;
        opacity: .5;
        position:absolute;
        transition: opacity .2s cubic-bezier(.4,0,.2,1)
      }
      #player.playing::before {
        opacity: 0;
      }
      #player {
        cursor:pointer;
        position:relative;
        touch-action: manipulation;
      }
    </style>
    <div id="player" on-tap="{{_toggled}}">
      <content></content>
    </div>
  </template>

  <script>
  Polymer('play-overlay', {
    publish: {
      paused: true,
      disabled: false
    },
    disabledChanged: function() {
      if (this.disabled)
        this.pause();
    },
    play: function() {
      if (!this.paused)
        return;
      this.paused = false;
      this.$.player.classList.add("playing");
      this.fire('play');
    },
    pause: function() {
      if (this.paused)
        return;
      this.paused = true;
      this.$.player.classList.remove("playing");
      this.fire('pause');
    },
    _toggled: function(ev) {
      ev.stopPropagation();
      if (this.disabled)
        return;

      if (this.paused)
        this.play();
      else
        this.pause();
    }
  });

  </script>
<polymer-element>
